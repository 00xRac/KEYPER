{% extends "base.html" %}
{% block content %}
<div class="container text-center mt-5">
  <div class="hover-card p-4">
    <h2 class="card-title mb-3">{{ _('Password Generator') }}</h2>

    <div class="mb-3">
      <label for="length" class="form-label">{{ _('Password Length:') }}</label>
      <input type="number" id="length" class="form-control text-center" value="12" min="4" max="128">
    </div>

    <div class="form-check">
      <input class="form-check-input" type="checkbox" id="uppercase" checked>
      <label class="form-check-label" for="uppercase">{{ _('Include Uppercase') }}</label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" id="lowercase" checked>
      <label class="form-check-label" for="lowercase">{{ _('Include Lowercase') }}</label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" id="digits" checked>
      <label class="form-check-label" for="digits">{{ _('Include Digits') }}</label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" id="symbols" checked>
      <label class="form-check-label" for="symbols">{{ _('Include Symbols') }}</label>
    </div>

    <button id="generateBtn" class="btn btn-primary mt-3">{{ _('Generate Password') }}</button>

    <div class="mt-4">
      <h4>{{ _('Generated Password:') }}</h4>
      <input type="text" id="result" class="form-control text-center" readonly>
    </div>
  </div>
</div>

<script>
document.getElementById("generateBtn").addEventListener("click", async () => {
  const length = document.getElementById("length").value;
  const data = {
    length: parseInt(length),
    uppercase: document.getElementById("uppercase").checked,
    lowercase: document.getElementById("lowercase").checked,
    digits: document.getElementById("digits").checked,
    symbols: document.getElementById("symbols").checked
  };

  const response = await fetch("/generate_password", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(data)
  });

  const resultInput = document.getElementById("result");
  const result = await response.json();

  if (response.ok) {
    resultInput.value = result.password;
  } else {
    resultInput.value = result.error || "Error generating password";
  }
});
</script>
{% endblock %}
